<!DOCTYPE HTML>
<html>
<head>
<title>PhoneGap</title>
<script type="text/javascript" 
	src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=true&amp;libraries=places">
</script> 
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script>
google.maps.event.addDomListener(window, 'load', setup); 
function setup() {
    // wait for PhoneGap to load
    document.addEventListener("deviceready", onDeviceReady, false);
}
function onDeviceReady() {
    	var showButton=document.getElementById("showBtn");
    	showButton.addEventListener("click",showMap,false);
}
function showMap(){
  // get device's geographical location and return it as a Position object (which is then passed to onSuccess)
  //navigator.geolocation.getCurrentPosition(onSuccess, onError);
   navigator.geolocation.getCurrentPosition(loadMap, geoError);
}
function loadMap(position) {
    var latlng = new google.maps.LatLng(position.coords.latitude,
            position.coords.longitude);
    var myOptions = {
        zoom : 15,
        center : latlng,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    };
 
    var mapObj = document.getElementById("map_canvas");
    var map = new google.maps.Map(mapObj, myOptions);
    var marker = new google.maps.Marker({
        position : latlng,
        map : map,
        title : "You"
    });
   
}
function onSuccess(position) { 
    var myLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    map  = new google.maps.Map(document.getElementById('map_canvas'), {
	mapTypeId: google.maps.MapTypeId.ROADMAP,
	center: myLocation,
	zoom: 15
    }); 
    
    var infowindow  = new google.maps.InfoWindow();
    google.maps.event.addListener(marker, 'click', function () {
		infowindow.setContent(position.name);
		infowindow.open(map, this);
	});
}
function geoError(error) {
    alert('code: ' + error.code + ' ' + 'message: ' + error.message + ' ');
}

</script>
<meta name="viewport" content="initial-scale=1.0,user-scalable=no"/>
</head>
<body>
  <h1>Map Example</h1>
  <button id="showBtn">Show Map</button>
  <br/>
    <div data-role="page" id="map-page">
        <div id="map_canvas" style="width: 300px; height: 300px"></div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
	           <ul>
	                    <li><a href="index.html">index</a></li>
	                    <li><a href="map.html">map</a></li>
	                    <li><a href="compass.html">compass</a></li>
	                    <li><a href="accelerometer.html" class="ui-btn-active">accelerometer</a></li>
	            </ul>
  			</div>
        </div>
        
    </div>
</body>
</html>